<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LockIn - Quiz</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <!-- Latex Parsing -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
  <body>
    <div id="quiz-page">

      <div id="question-form">
        <div class="quiz-form-container">
          <!-- Test title + Bo image -->
          <div class="form-left-left">
            <h1 class="quiz-title">Test</h1>
            <img src="{{ url_for('static', filename='images/Bo_quiz.png') }}" alt="Bo reading" class="bo-reading-img">
          </div>

          <!-- Form middle -->
          <div class="form-middle">
            <div class="form-row">
              <label for="curriculum" id="curriculum-label">Curriculum:</label>
              <select id="curriculum">
                <option value="IGCSE">IGCSE</option>
                <option value="IB">IB</option>
              </select>
            </div>

            <div class="form-row">
            <label for="subject" id="subject-label">Subject:</label>
            <select id="subject">
              <option value="Math">Mathematics</option>
              <option value="Physics">Physics</option>
              <option value="Biology">Biology</option>
              <option value="Chemistry">Chemistry</option>
              <option value="History">History</option>
              <option value="Geography">Geography</option>
              <option value="Business">Business</option>
              <option value="Economics">Economics</option>
              <option value="Computer Science">Computer Science</option>
              <option value="Sports Science">Sports Science</option>
            </select>
            </div>

            <div class="form-row">
            <label for="topic" id="topic-label">Topic:</label>
            <input type="text" id="topic" placeholder="e.g., Quadratics">
            </div>

            <div class="form-row">
            <label for="difficulty" id="difficulty-label">Difficulty:</label>
            <select id="difficulty">
              <option value="Easy">Easy</option>
              <option value="Medium">Medium</option>
              <option value="Hard">Hard</option>
              <option value="Mixed">Mixed</option>
            </select>
            </div>
          </div>

          <!-- IB level only -->
          <div class="form-right">
            <div id="ib-level-container" style="display: none;">
              <label for="ibLevel" id="level-label">IB Level:</label>
              <select id="ibLevel">
                <option value="SL">SL</option>
                <option value="HL">HL</option>
              </select>
            </div>
          </div>
        </div>

        <div class="quiz-actions">
          <input type="number" id="numQuestions" min="1" max="8" value="5">
          <button onclick="generateQuestions()" style="font-family: 'roboto'">Generate Questions</button>
        </div>
      </div>

      <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <div class="spinner"></div>
        <p class="loading-text">Your questions are being generated...</p>
      </div>

      <div id="score" style="margin-top: 20px; font-weight: bold;"></div>
      <div id="output" style="margin-top: 20px;"></div>
    </div>

    <script src="{{ url_for('static', filename='js/quiz.js') }}"></script>

    <script>
      document.getElementById('curriculum').addEventListener('change', function () {
        const ibLevelContainer = document.getElementById('ib-level-container');
        ibLevelContainer.style.display = this.value === 'IB' ? 'block' : 'none';
      });
    </script>
  </body>
</html>